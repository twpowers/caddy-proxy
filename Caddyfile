{
  # Don’t try to manage HTTPS inside the container,
  # let Railway’s edge do that:
  auto_https off
}

# only listen on HTTP/80 in‐container
:80 {
  @api path_regexp api ^/api/(.*)$
  reverse_proxy @api {env.API_URL}/{http.regexp.api.1}

  # all other requests → frontend
  reverse_proxy {env.FRONTEND_URL}
}
